import{_ as a,c as i,a0 as t,o as n}from"./chunks/framework.C8sLidy6.js";const E=JSON.parse('{"title":"多设备单独播放功能设计","description":"","frontmatter":{"title":"多设备单独播放功能设计"},"headers":[],"relativePath":"issues/366.md","filePath":"issues/366.md","lastUpdated":1764908636000}'),e={name:"issues/366.md"};function l(h,s,p,k,r,o){return n(),i("div",null,s[0]||(s[0]=[t(`<h1 id="多设备单独播放功能设计" tabindex="-1">多设备单独播放功能设计 <a class="header-anchor" href="#多设备单独播放功能设计" aria-label="Permalink to &quot;多设备单独播放功能设计&quot;" target="_self">​</a></h1><h2 id="分组功能" tabindex="-1">分组功能 <a class="header-anchor" href="#分组功能" aria-label="Permalink to &quot;分组功能&quot;" target="_self">​</a></h2><p>为设备设计分组功能，可以把一个或者多个设备加入到一个分组，一个分组内的设备会被控制同时播放。设备的音量需要支持独立配置。</p><p>分组用 group_list 字段配置，比如 <code>did1:客厅,did2:客厅</code> 表示 did1和did2用同一个组名。不配置这个参数就说明一个设备一个分组。后台勾选设备的意图改为哪些设备可以接入。比如:</p><p><code>319762914:a,319518426:a,1236547:b</code></p><p>单个设备的存储配置结构如下:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;devices&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;10086&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;cur_music&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;当前播放的歌曲&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;cur_playlist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;当前播放的列表&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;客厅的小爱1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;play_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;10087&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;cur_music&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;当前播放的歌曲&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;cur_playlist&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;当前播放的列表&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;客厅的小爱2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;play_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>设备名字从音箱app设置里读取过来，不用在后台修改。</p><p>配置采用组名相同为一组，可以考虑不设置组名就用设备名作为组名，也就是一个设备为一组。</p><p>后端提供的接口都改为支持操作多个设备，</p><p>单曲循环，随机播放这些操作都会同步修改同一个组里的其他设备。</p><p>歌单列表所有设备共享，当前选择的歌单和当前播放的歌曲组内共享，一个组共用一份播放列表，也就是共用一个定时器。</p><h2 id="主页设备切换" tabindex="-1">主页设备切换 <a class="header-anchor" href="#主页设备切换" aria-label="Permalink to &quot;主页设备切换&quot;" target="_self">​</a></h2><p>主页主要是用于播放操作的，所有操作都是针对于单个设备的，所以在顶部加入一个切换设备的功能。除了修改声音不会同步修改组内设备，其他操作都会同时操作组内所有设备。</p><blockquote><p>/issues/65.html#issuecomment-2215736529</p></blockquote><h2 id="评论" tabindex="-1">评论 <a class="header-anchor" href="#评论" aria-label="Permalink to &quot;评论&quot;" target="_self">​</a></h2><h3 id="评论-1-jason856856842388" tabindex="-1">评论 1 - jason856856842388 <a class="header-anchor" href="#评论-1-jason856856842388" aria-label="Permalink to &quot;评论 1 - jason856856842388&quot;" target="_self">​</a></h3><p>请问家里有多个小爱，如何让每个小爱都可以拥有这个功能</p><hr><h3 id="评论-2-hanxi" tabindex="-1">评论 2 - hanxi <a class="header-anchor" href="#评论-2-hanxi" aria-label="Permalink to &quot;评论 2 - hanxi&quot;" target="_self">​</a></h3><blockquote><p>请问家里有多个小爱，如何让每个小爱都可以拥有这个功能</p></blockquote><p>没理解哪个功能？</p><hr><h3 id="评论-3-jason856856842388" tabindex="-1">评论 3 - jason856856842388 <a class="header-anchor" href="#评论-3-jason856856842388" aria-label="Permalink to &quot;评论 3 - jason856856842388&quot;" target="_self">​</a></h3><p>做得好</p><hr><p><a href="https://github.com/hanxi/xiaomusic/issues/366" target="_self">链接到 GitHub Issue</a></p>`,27)]))}const u=a(e,[["render",l]]);export{E as __pageData,u as default};
