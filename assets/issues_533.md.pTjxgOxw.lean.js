import{_ as a,c as n,a0 as e,o as t}from"./chunks/framework.C8sLidy6.js";const x=JSON.parse('{"title":"反向代理因为html中绝对路径导致超链接失效","description":"","frontmatter":{"title":"反向代理因为html中绝对路径导致超链接失效"},"headers":[],"relativePath":"issues/533.md","filePath":"issues/533.md","lastUpdated":1759772936000}'),p={name:"issues/533.md"};function l(i,s,o,r,u,c){return t(),n("div",null,s[0]||(s[0]=[e(`<h1 id="反向代理因为html中绝对路径导致超链接失效" tabindex="-1">反向代理因为html中绝对路径导致超链接失效 <a class="header-anchor" href="#反向代理因为html中绝对路径导致超链接失效" aria-label="Permalink to &quot;反向代理因为html中绝对路径导致超链接失效&quot;" target="_self">​</a></h1><p>反向代理因为html中绝对路径导致超链接失效</p><h2 id="评论" tabindex="-1">评论 <a class="header-anchor" href="#评论" aria-label="Permalink to &quot;评论&quot;" target="_self">​</a></h2><h3 id="评论-1-wuxinyumrx" tabindex="-1">评论 1 - wuxinyumrx <a class="header-anchor" href="#评论-1-wuxinyumrx" aria-label="Permalink to &quot;评论 1 - wuxinyumrx&quot;" target="_self">​</a></h3><p>更新一下解决方案，nginx反向代理配置如下（需要nginx包含http_sub_module）：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>        proxy_http_version 1.1;</span></span>
<span class="line"><span>        proxy_pass http://xx.xx.xx.xx:58090/;</span></span>
<span class="line"><span>        proxy_set_header Host $host;</span></span>
<span class="line"><span>        proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>        proxy_set_header X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span>        proxy_set_header Upgrade $http_upgrade;</span></span>
<span class="line"><span>        proxy_set_header Connection &quot;upgrade&quot;;</span></span>
<span class="line"><span>        add_header Access-Control-Allow-Origin *;</span></span>
<span class="line"><span>        add_header Access-Control-Allow-Methods &#39;GET, POST, OPTIONS&#39;;</span></span>
<span class="line"><span>        add_header Access-Control-Allow-Headers &#39;DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Authorization&#39;;</span></span>
<span class="line"><span>        proxy_set_header Accept-Encoding &quot;&quot;;</span></span>
<span class="line"><span>        sub_filter_types *;</span></span>
<span class="line"><span>        sub_filter_once off;</span></span>
<span class="line"><span>        sub_filter &#39;/ws/&#39; &#39;/xm/ws/&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/static/&#39; &#39;/xm/static/&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/musiclist&#39; &#39;/xm/musiclist&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/musicinfo&#39; &#39;/xm/musicinfo&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/curplaylist&#39; &#39;/xm/curplaylist&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/generate_ws_token&#39; &#39;/xm/generate_ws_token&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/getversion&#39; &#39;/xm/getversion&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/getsetting&#39; &#39;/xm/getsetting&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/getvolume&#39; &#39;/xm/getvolume&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/setvolume&#39; &#39;/xm/setvolume&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/playingmusic&#39; &#39;/xm/playingmusic&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/searchmusic&#39; &#39;/xm/searchmusic&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/latestversion&#39; &#39;/xm/latestversion&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/cmd&#39; &#39;/xm/cmd&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;musiclist&#39; &#39;&quot;xm/musiclist&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;musicinfo&#39; &#39;&quot;xm/musicinfo&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;curplaylist&#39; &#39;&quot;xm/curplaylist&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;generate_ws_token&#39; &#39;&quot;xm/generate_ws_token&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;getversion&#39; &#39;&quot;xm/getversion&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;getsetting&#39; &#39;&quot;xm/getsetting&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;getvolume&#39; &#39;&quot;xm/getvolume&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;setvolume&#39; &#39;&quot;xm/setvolume&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;playingmusic&#39; &#39;&quot;xm/playingmusic&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;searchmusic&#39; &#39;&quot;xm/searchmusic&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;latestversion&#39; &#39;&quot;xm/latestversion&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;cmd&#39; &#39;&quot;xm/cmd&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;/manifest.json&#39; &#39;/xm/manifest.json&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;start_url&quot;: &quot;/&quot;&#39; &#39;&quot;start_url&quot;: &quot;/xm/&quot;&#39;;</span></span>
<span class="line"><span>        sub_filter &#39;&quot;scope&quot;: &quot;/&quot;&#39; &#39;&quot;scope&quot;: &quot;/xm/&quot;&#39;;</span></span></code></pre></div><hr><h3 id="评论-2-wooodxi" tabindex="-1">评论 2 - wooodxi <a class="header-anchor" href="#评论-2-wooodxi" aria-label="Permalink to &quot;评论 2 - wooodxi&quot;" target="_self">​</a></h3><p>首先感谢各位大佬辛苦的付出。 我是家庭使用的威联通NAS部署的xiaomusic,NAS上也是使用的docker部署的是frpc客户端（nas上填写对应的端口号），在云服务使用docker部署的frps服务端（填写二级ssl域名）这样的反向代理，部署好以后外网通过链接https:xxx.xxx.xx是可以访问xiaomusic，播放歌曲音箱却没有声音，但是你们的测试播放连接是可以播放音乐， 包括点击停止播放音箱也是可以回应听到音箱发出再见收到的声音，就是播放歌曲音箱不出声。希望可以得到解答。 谢谢大佬</p><hr><h3 id="评论-3-hanxi" tabindex="-1">评论 3 - hanxi <a class="header-anchor" href="#评论-3-hanxi" aria-label="Permalink to &quot;评论 3 - hanxi&quot;" target="_self">​</a></h3><p>@wooodxi 需要改设置页面的ip和端口。</p><hr><p><a href="https://github.com/hanxi/xiaomusic/issues/533" target="_self">链接到 GitHub Issue</a></p>`,14)]))}const _=a(p,[["render",l]]);export{x as __pageData,_ as default};
