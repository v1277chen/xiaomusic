<!DOCTYPE html>
<html>

<head>
  <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width">
  <title>小愛音箱操控面板</title>
  <script src="./jquery-3.7.1.min.js?version=1766282679"></script>
  <script src="./setting.js?version=1766282679"></script>
  <link rel="stylesheet" type="text/css" href="./main.css?version=1766282679">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z09NC1K7ZW"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments) };
    gtag('js', new Date());
    gtag('config', 'G-Z09NC1K7ZW');
  </script>

  <!-- umami -->
  <!-- <script async defer src="https://umami.hanxi.cc/script.js" data-website-id="7bfb0890-4115-4260-8892-b391513e7e99"></script> -->

  <!--
<script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
<script>
var vConsole = new window.VConsole();
</script>
-->

</head>

<body>
  <h2>小愛音箱設定面板
    (<a id="version" href="https://xdocs.hanxi.cc/issues/changelog.html">版本未知</a>)
  </h2>
  <hr>

  <div class="rows">
    <label for="mi_did">*勾選設備(至少勾選1個):</label>
    <div id="mi_did">
    </div>
  </div>
  <br>

  <div id="setting">
    <div class="rows">
      <label for="account">*小米帳號:</label>
      <input id="account" type="text" placeholder="填寫小米登入帳號" />

      <label for="password">*小米密碼:</label>
      <input id="password" type="password" placeholder="填寫小米登入密碼" />

      <label for="hostname" class="setting-label">*NAS的IP或域名:
        <button class="option-inline mini-button" id="auto-hostname">
          <span class="material-icons">edit</span>
          <span>自動填</span>
        </button>
      </label>
      <input id="hostname" type="text" />

      <label for="public_port" class="setting-label">*本地端口:
        <button class="option-inline mini-button" id="auto-port">
          <span class="material-icons">edit</span>
          <span>自動填</span>
        </button>
      </label>
      <input id="public_port" type="number" value="0" />
    </div>
    <hr>

    <div class="rows">
      <label for="verbose">是否開啟調試日誌:</label>
      <select id="verbose">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="group_list">設備分組配置（不推薦，聲音不同步）:<a href="https://xdocs.hanxi.cc/issues/366.html"
          target="_blank">文檔</a></label>
      <input id="group_list" type="text" placeholder="did1:組名1,did2:組名1,did3:組名2" />

      <label for="music_path">音樂目錄:</label>
      <input id="music_path" type="text" value="music" />

      <label for="enable_file_watch">啟用目錄監控(自動刷新音樂列表):</label>
      <select id="enable_file_watch">
        <option value="true">開啟</option>
        <option value="false" selected>關閉</option>
      </select>

      <label for="file_watch_debounce">刷新列表延遲時間(秒):</label>
      <input id="file_watch_debounce" type="number" value="10" />

      <label for="download_path">音樂下載目錄(必須是music的子目錄):</label>
      <input id="download_path" type="text" value='music/download' />

      <label for="conf_path">配置文件目錄:</label>
      <input id="conf_path" type="text" />

      <label for="cache_dir">緩存文件目錄:</label>
      <input id="cache_dir" type="text" value='cache' />

      <label for="temp_path">臨時文件目錄:</label>
      <input id="temp_path" type="text" value="music/tmp" />

      <label for="ffmpeg_location">ffmpeg路徑:</label>
      <input id="ffmpeg_location" type="text" value="./ffmpeg/bin" />

      <label for="log_file">日誌路徑:</label>
      <input id="log_file" type="text" value="xiaomusic.log.txt" />

      <label for="active_cmd">允許喚醒的命令:</label>
      <input id="active_cmd" type="text" value="play,online_play,random_play,playlocal,play_music_list,stop" />

      <label for="exclude_dirs">忽略目錄(逗號分割):</label>
      <input id="exclude_dirs" type="text" value="@eaDir,tmp" />

      <label for="ignore_tag_dirs">不掃描標籤信息目錄(逗號分割):</label>
      <input id="ignore_tag_dirs" type="text" value="" />

      <label for="music_path_depth">目錄深度:</label>
      <input id="music_path_depth" type="number" value="10" />

      <label for="search_music_count">搜尋歌曲數量:</label>
      <input id="search_music_count" type="number" value="100" />

      <label for="search_prefix">XIAOMUSIC_SEARCH(歌曲下載方式):</label>
      <select id="search_prefix">
        <option value="bilisearch:">bilisearch:</option>
        <option value="ytsearch:">ytsearch:</option>
      </select>

      <label for="proxy">XIAOMUSIC_PROXY(ytsearch需要):</label>
      <input id="proxy" type="text" placeholder="http://192.168.2.5:8080" />

      <label for="get_duration_type">獲取時長方式:</label>
      <select id="get_duration_type">
        <option value="ffprobe" selected>ffprobe</option>
        <option value="mutagen">mutagen</option>
      </select>

      <label for="loudnorm">均衡歌曲音量大小(loudnorm濾鏡):</label>
      <input id="loudnorm" type="text" placeholder="loudnorm=I=-14:TP=-1.5:LRA=6" />

      <label for="remove_id3tag">去除MP3 ID3v2和填充:</label>
      <select id="remove_id3tag">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="convert_to_mp3">轉換為MP3:</label>
      <select id="convert_to_mp3">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="disable_httpauth">關閉控制台密碼驗證:</label>
      <select id="disable_httpauth">
        <option value="true" selected>true</option>
        <option value="false">false</option>
      </select>
      <label for="httpauth_username">控制台帳戶:</label>
      <input id="httpauth_username" type="text" value="" />
      <label for="httpauth_password">控制台密碼:</label>
      <input id="httpauth_password" type="password" value="" />

      <label for="disable_download">關閉下載功能:</label>
      <select id="disable_download">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="use_music_audio_id">觸屏版顯示歌曲ID:</label>
      <input id="use_music_audio_id" type="text" value="1582971365183456177" />
      <label for="use_music_id">觸屏版顯示歌曲分段ID:</label>
      <input id="use_music_id" type="text" value="355454500" />

      <label for="fuzzy_match_cutoff">模糊匹配閾值(0.1~0.9):</label>
      <input id="fuzzy_match_cutoff" type="number" value="0.6" />

      <label for="enable_fuzzy_match">開啟模糊搜尋:</label>
      <select id="enable_fuzzy_match">
        <option value="true" selected>true</option>
        <option value="false">false</option>
      </select>

      <label for="use_music_api">型號兼容模式:</label>
      <select id="use_music_api">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="continue_play">啟用繼續播放(可能導致兼容性問題):</label>
      <select id="continue_play">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="enable_pull_ask">獲取對話記錄:</label>
      <select id="enable_pull_ask">
        <option value="true" selected>true</option>
        <option value="false">false</option>
      </select>

      <label for="pull_ask_sec">獲取對話記錄間隔(秒):</label>
      <input id="pull_ask_sec" type="number" value="1" />

      <label for="delay_sec">下一首歌延遲播放秒數(支持負數):</label>
      <input id="delay_sec" type="number" value="0" />

      <label for="stop_tts_msg">停止提示音:</label>
      <input id="stop_tts_msg" type="text" value="收到,再見" />
      <label for="play_type_one_tts_msg">單曲循環提示音:</label>
      <input id="play_type_one_tts_msg" type="text" value="已經設置為單曲循環" />
      <label for="play_type_all_tts_msg">全部循環提示音:</label>
      <input id="play_type_all_tts_msg" type="text" value="已經設置為全部循環" />
      <label for="play_type_rnd_tts_msg">隨機播放提示音:</label>
      <input id="play_type_rnd_tts_msg" type="text" value="已經設置為隨機播放" />
      <label for="play_type_sin_tts_msg">單曲播放提示音:</label>
      <input id="play_type_sin_tts_msg" type="text" value="已經設置為單曲播放" />
      <label for="play_type_seq_tts_msg">順序播放提示音:</label>
      <input id="play_type_seq_tts_msg" type="text" value="已經設置為順序播放" />

      <label for="keywords_playlocal">播放本地歌曲口令:</label>
      <input id="keywords_playlocal" type="text" value="播放本地歌曲,本地播放歌曲" />
      <label for="keywords_play">播放歌曲口令:</label>
      <input id="keywords_play" type="text" value="播放歌曲,放歌曲" />
      <label for="keywords_playlist">播放列表口令:</label>
      <input id="keywords_playlist" type="text" value="播放列表,播放歌單" />
      <label for="keywords_stop">停止口令:</label>
      <input id="keywords_stop" type="text" value="關機,暫停,停止,停止播放" />
      <label for="keywords_search_playlocal">本地搜尋播放口令(會產生臨時播放列表):</label>
      <input id="keywords_search_playlocal" type="text" value="本地搜索播放" />
      <label for="keywords_search_play">搜尋播放口令(會產生臨時播放列表):</label>
      <input id="keywords_search_play" type="text" value="搜索播放" />
      <label for="keywords_online_play">在線播放口令(在線搜尋接口或插件):</label>
      <input id="keywords_online_play" type="text" value="在线播放" />

      <label for="enable_yt_dlp_cookies">啟用yt-dlp-cookies(需要先上傳yt-dlp-cookies.txt文件):</label>
      <select id="enable_yt_dlp_cookies">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="enable_save_tag">啟用ID3標籤寫入文件:</label>
      <select id="enable_save_tag">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="get_ask_by_mina">特殊型號獲取對話記錄:</label>
      <select id="get_ask_by_mina">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="recently_added_playlist_len">最近新增的歌曲數量:</label>
      <input id="recently_added_playlist_len" type="number" value="50" />

      <label for="enable_cmd_del_music">開啟語音刪除歌曲:</label>
      <select id="enable_cmd_del_music">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="enable_analytics">開啟谷歌數據統計(無敏感數據):</label>
      <select id="enable_analytics">
        <option value="true" selected>true</option>
        <option value="false">false</option>
      </select>

      <label for="web_music_proxy">網絡歌曲過代理:</label>
      <select id="web_music_proxy">
        <option value="true">true</option>
        <option value="false" selected>false</option>
      </select>

      <label for="music_list_url" class="setting-label">歌單地址:
        <button class="option-inline mini-button" id="get_music_list">
          <span class="material-icons">sync_alt</span>
          <span>獲取歌單</span>
        </button>
      </label>
      <input id="music_list_url" type="text"
        value="https://gist.githubusercontent.com/hanxi/dda82d964a28f8110f8fba81c3ff8314/raw/example.json" />

      <label for="music_list_json">歌單內容:<a href="https://xdocs.hanxi.cc/issues/78.html" target="_blank">格式文檔</a></label>
      <textarea id="music_list_json" type="text"></textarea>

      <label for="crontab_json">定時任務:<a href="https://xdocs.hanxi.cc/issues/182.html" target="_blank">格式文檔</a></label>
      <textarea id="crontab_json" type="text"></textarea>
    </div>
  </div>
  <hr>

  <div class="rows">
    <label for="yt_dlp_cookies_file">上傳yt_dlp_cookies.txt文件:<a href="https://xdocs.hanxi.cc/issues/210.html"
        target="_blank">文檔</a></label>
    <input id="yt_dlp_cookies_file" name="file" type="file">
    <button id="upload_yt_dlp_cookie">上傳</button>
  </div>
  <hr>

  <div class="buttons">
    <div class="button-group">
      <button onclick="location.href='/static/default/index.html';">返回首頁</button>
      <button class="save-button">保存</button>
    </div>

    <div class="button-group">
      <button id="refresh_music_tag">刷新tag</button>
      <button id="clear_cache">清空緩存</button>
      <a href="/downloadlog" download="xiaomusic.txt"><button>下載日誌文件</button></a>
    </div>

    <div class="button-group">
      <a href="/docs" target="_blank"><button>接口文檔</button></a>
      <a href="./m3u.html" target="_blank"><button>m3u轉換</button></a>
      <a href="./downloadtool.html" target="_blank"><button>歌曲下載工具</button></a>
      <a href="./merge/index.html" target="_blank"><button>歌單合併工具</button></a>
    </div>

    <div class="button-group">
      <a href="./debug.html" target="_blank"><button>調試工具</button></a>
      <a href="https://afdian.com/a/imhanxi" target="_blank"><button>💰 愛發電</button></a>
      <a href="https://github.com/hanxi/xiaomusic" target="_blank"><button>點個 Star ⭐</button></a>
    </div>
  </div>

  <div class="rows">
    <img class="qrcode" src="./qrcode.png" alt="請涵曦喝奶茶🧋">
  </div>
  <footer>
    <p>Powered by <a href="https://xdocs.hanxi.cc" target="_blank">XiaoMusic</a></p>
  </footer>
</body>

</html>