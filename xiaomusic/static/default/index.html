<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小愛音箱操控面板</title>
    <script src="./jquery-3.7.1.min.js?version=1766282679"></script>
    <link rel="stylesheet" href="./main.css?version=1766282679">
    <link rel="icon" href="./favicon.ico">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z09NC1K7ZW"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments) };
        gtag('js', new Date());
        gtag('config', 'G-Z09NC1K7ZW');
    </script>

    <!-- umami -->
    <!-- <script async defer src="https://umami.hanxi.cc/script.js" data-website-id="7bfb0890-4115-4260-8892-b391513e7e99"></script> -->
</head>

<body class="index_page">
    <div class="player">
        <h1>小愛音箱播放器
            <a id="version" href="https://xdocs.hanxi.cc/issues/changelog.html" target="_blank">0.3.0</a><span
                id="versionnew" class="new-badge"></span>
        </h1>

        <label for="did">選擇播放設備:</label>
        <select id="did" class="device-selector">
            <option value="default">預設設備</option>
        </select>

        <label for="music_list" style="display: flex;align-items: center;">選擇播放列表:
            <div class="option-inline" onclick="sendcmd('刷新列表')">
                <span class="material-icons">refresh</span>
                <span class="tooltip">刷新列表</span>
            </div>
        </label>
        <select id="music_list" class="playlist-selector">
        </select>

        <label for="music_name" style="display: flex;align-items: center;">選擇歌曲:
            <div style="display: flex;align-items: center;margin-left: auto;">
                <div class="option-inline" onclick="triggerUpload()">
                    <span class="material-icons">file_upload</span>
                    <span class="tooltip">上傳歌曲</span>
                </div>
                <div class="option-inline" onclick="toggleDelete()">
                    <span class="material-icons">delete</span>
                    <span class="tooltip">刪除歌曲</span>
                </div>
            </div>
        </label>
        <select id="music_name" class="song-selector">
        </select>

        <input id="upload-file" type="file" accept=".mp3,.m4a,.wav,.flac,.aac,.ogg,.ape" style="display:none" />

        <div id="device-audio">
            <progress class="progress" id="progress" value="0" max="100"></progress>
            <div style="display: flex; justify-content: space-between; width: 100%;">
                <span class="current-time" id="current-time">0:00</span>
                <div class="current-song" id="playering-music">當前播放歌曲：無</div>
                <span class="duration" id="duration">00:00</span>
            </div>
        </div>
        <audio id="audio" controls src="" autoplay></audio>

        <div class="buttons">
            <div class="player-controls button-group">
                <div id="modeBtn" onclick="togglePlayMode()" class="control-button device-enable">
                    <span class="material-icons">shuffle</span>
                    <span class="tooltip">切換播放模式</span>
                </div>
                <div onclick="prevTrack()" class="control-button device-enable">
                    <span class="material-icons">skip_previous</span>
                    <span class="tooltip">上一首</span>
                </div>
                <div onclick="play()" class="control-button">
                    <span class="material-icons-outlined play">play_circle_outline</span>
                    <span class="tooltip">播放</span>
                </div>
                <div onclick="nextTrack()" class="control-button device-enable">
                    <span class="material-icons">skip_next</span>
                    <span class="tooltip">下一首</span>
                </div>
                <div onclick="stopPlay()" class="control-button device-enable">
                    <span class="material-icons">stop</span>
                    <span class="tooltip">關機</span>
                </div>

            </div>
            <div class="mode-controls button-group">
                <div onclick="addToFavorites()" class="favorite icon-item device-enable">
                    <span class="material-icons">favorite</span>
                    <p>收藏</p>
                </div>
                <div onclick="toggleVolume()" class="icon-item device-enable">
                    <span class="material-icons">volume_up</span>
                    <p>音量</p>
                </div>
                <div onclick="toggleSearch()" class="icon-item device-enable">
                    <span class="material-icons">search</span>
                    <p>搜尋</p>
                </div>
                <div onclick="toggleTimer()" class="icon-item device-enable">
                    <span class="material-icons">timer</span>
                    <p>定時</p>
                </div>
                <div onclick="togglePlayLink()" class="icon-item device-enable">
                    <span class="material-icons">emoji_nature</span>
                    <p>測試</p>
                </div>
                <div onclick="openSettings()" class="icon-item">
                    <span class="material-icons">settings</span>
                    <p>設定</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 搜索組件 -->
    <div class="component" id="search-component">
        <h2>搜尋歌曲</h2>
        <input type="text" id="search" class="search-input" placeholder="請輸入搜尋關鍵字(如:MV高清版 周杰倫 七里香)">
        <label for="music-name" id="music-name-label" style="display: none;">確認選擇:</label>
        <select id="music-name" style="display: none;">
            <!-- 動態生成選項 -->
        </select>
        <input id="music-filename" type="text" placeholder="請輸入保存為的文件名稱(如:周杰倫七里香)" style="display: none;"></input>
        <div class="component-button-group">
            <button onclick="confirmSearch()">確定</button>
            <button onclick="toggleSearch()">關閉</button>
        </div>
    </div>

    <!-- 定時關機組件 -->
    <div class="component" id="timer-component">
        <h2>定時關機</h2>

        <button onclick="timedShutDown('10分钟后关机')">10分鐘後關機</button>
        <button onclick="timedShutDown('30分钟后关机')">30分鐘後關機</button>
        <button onclick="timedShutDown('60分钟后关机')">60分鐘後關機</button>
        <span class="tooltip timer-tooltip" style="display: none;">已發送指令</span>
        <div class="component-button-one">
            <button onclick="toggleTimer()">關閉</button>
        </div>
    </div>

    <!-- 播放連結組件 -->
    <div class="component" id="playlink-component">
        <h2>播放連結</h2>
        <input type="text" id="music-url" class="search-input" placeholder="請輸入播放連結"
            value="https://lhttp.qtfm.cn/live/4915/64k.mp3">
        <h2>播放文字</h2>
        <input type="text" id="text-tts" class="search-input" placeholder="請輸入文字" value="播放文字測試">

        <div class="component-button-group">
            <button onclick="playUrl()">播放連結</button>
            <button onclick="playProxyUrl()">代理播放連結</button>
        </div>
        <div class="component-button-group">
            <button onclick="playTts()">播放文字</button>
            <button onclick="togglePlayLink()">關閉</button>
        </div>
    </div>


    <!-- 音量組件 -->
    <div class="component" id="volume-component">
        <h2>調節音量</h2>
        <input type="range" id="volume" class="volume-slider" />
        <div class="component-button-one">
            <button onclick="toggleVolume()">關閉</button>
        </div>
    </div>
    <!-- 刪除確認組件 -->
    <div class="component" id="delete-component">
        <h2>警告</h2>
        <p>你確定要刪除歌曲 <span id="delete-music-name"></span> 嗎？</p>
        <p style="font-weight: bold;">注意：該操作會永久刪除該歌曲且不可撤銷</p>
        <div class="component-button-group">
            <button onclick="confirmDelete()">確定</button>
            <button onclick="toggleDelete()">關閉</button>
        </div>
    </div>
    <!-- 警告組件 -->
    <div class="component" id="warning-component">
        <h2>警告</h2>
        <p>當前頁面的HOST與設定中的HOST不一致，請檢查是否設定錯誤</p>
        <p>當前HOST: <span id="local-host"></span></p>
        <p>設定中的HOST: <span id="setting-host"></span></p>
        <div class="component-button-group">
            <a href="./setting.html" target="_blank"><button>立即修改</button></a>
            <button onclick="nowarning()">繼續並不再顯示</button>
            <button onclick="toggleWarning()">取消</button>
        </div>
    </div>
    <div class="footer">
        Powered by XiaoMusic
    </div>

    <script src="./md.js?version=1766282679">
    </script>
</body>

</html>